<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    
    <link rel="apple-touch-icon" sizes="76x76" href="/null">
    <link rel="icon" type="image/png" href="/null">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    <title>Opencv基础学习笔记 - Ben Shu &#39;s Blog</title>
    
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    
    <meta name="description" content="">
    <meta name="author" content="Big Ben">
    <meta name="keywords" content="">
    <meta property="og:title" content="Opencv基础学习笔记"/>
    <style>


    
    :root{
        --shadow-color: rgba(0,0,0,0.2);
        --sec-shadow: rgba(0,0,0,0.03);
        --shadow-hover-color: rgba(0,0,0,0.28);
        --first-text-color: #475b6d;
        --second-text-color: #37475b;
        --third-text-color: #858585;
        --default-text-color: #505050;
        --default-link-color: #007bff;
        --link-color: #000000;
        --second-link-color: #4F9BFA;
        --code-color:rgba(27,31,35,.05);
        --post-bkg-color: #fff;
        --page-bkg-color: #f2f5f8;
        --nav-a-hover-color: #3498db;
        --post-sec-text-color: #718096;
        --sec-bkg: #f2f5f8;
        --color-mode: 'light';
        --bkg-h: rgba(255,255,255,0.6);
        --bkg-m: #e1e4e8;
        --home-title-color: #4169E1;
        --shadow: 0 4px 10px rgba(0,2,4,0.06),0 0 1px rgba(0,2,4,0.11);
        --hr-color: #ddd;
        --bg-t: #f4f4f4;
        --nav-bkg: rgba(255,255,255,0.6);
    }

@media (prefers-color-scheme: dark) {
  :root {
    --color-mode: 'dark';
  }

  :root:not([data-theme]) {
    --first-text-color: hsla(0,0%,100%,0.92);
    --second-text-color: hsla(0,0%,100%,0.86);
    --third-text-color: #a7a9ad;
    --default-text-color: #505050;
    --default-link-color: #1589e9;
    --link-color: #000000;
    --second-link-color: #30a9de;
    --post-bkg-color: #252d38;
    --page-bkg-color: #181c27;
    --nav-a-hover-color: #3498db;
    --post-sec-text-color: #a7a9ad;
    --sec-bkg: #364151;
    --bkg-h: rgba(255,255,255,0.2);
    --bkg-m: rgba(255,255,255,0.1);
    --home-title-color: rgb(226, 82, 90);
    --code-color:#3e4b5e;
    --shadow: none;
    --hr-color: #718096;
    --bg-t: #364151;
    --nav-bkg: rgba(13,17,23,0.6);
  }
}

[data-theme='dark'] {
    --shadow-color: rgba(0,0,0,0.2);
    --shadow-hover-color: rgba(0,0,0,0.28);
    --first-text-color: hsla(0,0%,100%,0.92);
    --second-text-color: hsla(0,0%,100%,0.86);
    --third-text-color: #a7a9ad;
    --default-text-color: #505050;
    --default-link-color: #1589e9;
    --link-color: #000000;
    --second-link-color: #30a9de;
    --post-bkg-color: #252d38;
    --page-bkg-color: #181c27;
    --nav-a-hover-color: #3498db;
    --post-sec-text-color: #a7a9ad;
    --sec-bkg: #364151;
    --bkg-h: rgba(255,255,255,0.2);
    --bkg-m: rgba(255,255,255,0.1);
    --home-title-color: rgb(226, 82, 90);
    --code-color:#3e4b5e;
    --shadow: none;
    --hr-color: #718096;
    --bg-t: #364151;
    --nav-bkg: rgba(13,17,23,0.6);
}

</style>



<style>
#page-main,footer,.p-btn{
    display: none;
}
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
}
body {
    background-color: var(--page-bkg-color);
    color: var(--second-text-color);
    overflow-y: scroll;
    overflow-x: hidden;
    transition: all .3s;
}
a {
    color: var(--default-link-color);
    text-decoration: none;
    background-color: transparent;
}
a:hover{
    color: var(--second-link-color);
}
.main-content,.post-card-main{
    margin: 30px;
}



@media (max-width: 410px){
    .post-card-main{
        max-width: 350px!important;
    }
}

@media (max-width: 980px){
    .post-card-main{
        max-width: 520px!important;
    }
}


@media (min-width: 780px){ 
    h3{
        font-size: 1.5rem;
        line-height: 1.5em;
    }
}
@media (min-width: 1280px){ 
    h3{
        font-size: 1.7rem;
        line-height: 1.5em;
    }
}
@media (min-width: 2096px){ 
    h3{
        font-size: 1.8rem;
        line-height: 1.5em;
    }
}

.text-center{
    text-align: center!important;
}
.middle-center{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    height: 100%;
}
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed;
    height: 54px;
    padding: 0 1.25rem;
    top: 0;
    left: 0;
    right: 0;
    z-index: 10;
    border-bottom: 1px solid var(--bkg-m);
    background-color: var(--nav-bkg);
    backdrop-filter: blur(4px);
    transition: all .3s;
}
header .header__left, header .header__right {
    display: flex;
    align-items: center;
    font-family: rubik,sans-serif,Varela Round;
}
header .header__left .logo__text {
    font-size: 18px;
    font-weight: 450;
    padding: 14.5px 10px;
    border-radius: 5px;
    color: var(--second-text-color);
}
header .header__right .navbar__menus {
    height: 54px;
    padding: 0 0 0 15px;
}
header .header__right .button {
    color: var(--second-text-color);
}
header .header__right .navbar__menus .navbar-menu {
    display: inline-block;
    align-items: center;
    height: 54px;
    padding: 0 10px;
    font-size: 16px;
    line-height: 54px;
}
header .header__right .dropdown-icon {
    display: none;
    height: 54px;
    padding: 15px 10px;
    border: 0;
    background-color: transparent;
}
header .header__right .dropdown-menus {
    line-height: 2rem;
    animation: slide-in .15s ease 1;
    display: none;
    position: absolute;
    left: 12px;
    right: 12px;
    top: calc(54px + 10px);
    border-radius: 6px;
    padding: 24px;
    background-color: var(--page-bkg-color);
    border: 1px solid var(--bkg-m);
    z-index: 9999;
    justify-items: center;
    justify-content: center;
    flex-direction: column;
}
header .header__right #btn-search, header .header__right #btn-toggle-dark{
    display: inline-block;
    padding:  18px 10px;
    height: 25px;
}
header .header__right #btn-dropdown{
  display: inline-block;
  padding:  13.5px 0;
}
header .header__right .dropdown-menus .dropdown-menu {
    padding: 10px;
    color: var(--second-text-color);
}
@media screen and (max-width: 764px){
.navbar__menus {
    display: none!important;
}
.dropdown-icon {
    display: inline-block!important;
}
}
.p-btn{
    position: fixed;
    bottom: 1.2rem;
    right: 1.2rem;
    contain: layout;
}
.toc-btn,.click-btn{
    cursor: pointer;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    align-items: center;
    margin-top: .5rem;
    font-size: .75rem;
    background-color: var(--sec-bkg);
    display: block;
    padding: 0.9rem;
    box-shadow: 0 0.3rem 0.6rem rgba(48,55,66,.15);
    border: none;
    border-radius: 0.5rem;
    line-height: 1;
    color: var(--first-text-color);
}
.toc-link{
    color: var(--second-text-color);
}

#css-loading h3{
    font-weight: 500;
    font-size: 1.4rem;
    text-align: center;
    position: fixed;
    top: 200px;
    left: 0;
    right: 0;
    opacity: 0;
    animation: cssLoad;
    animation-delay: 0.3s;
    -webkit-animation: cssLoad;
    -webkit-animation-delay: 0.3s;
}
@keyframes cssLoad {
    from {
        opacity: 0;
    }
    to {
        opacity: 0.9;
    }
}


.memorial {
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    filter: grayscale(100%);
    filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); filter:gray;
}


    .post-copyright:after {
        position: absolute;
        color: #fff;
        background: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 496 512'%3E%3Cpath fill='gray' d='M245.8 214.9l-33.2 17.3c-9.4-19.6-25.2-20-27.4-20-22.2 0-33.3 14.6-33.3 43.9 0 23.5 9.2 43.8 33.3 43.8 14.4 0 24.6-7 30.5-21.3l30.6 15.5a73.2 73.2 0 01-65.1 39c-22.6 0-74-10.3-74-77 0-58.7 43-77 72.6-77 30.8-.1 52.7 11.9 66 35.8zm143 0l-32.7 17.3c-9.5-19.8-25.7-20-27.9-20-22.1 0-33.2 14.6-33.2 43.9 0 23.5 9.2 43.8 33.2 43.8 14.5 0 24.7-7 30.5-21.3l31 15.5c-2 3.8-21.3 39-65 39-22.7 0-74-9.9-74-77 0-58.7 43-77 72.6-77C354 179 376 191 389 214.8zM247.7 8C104.7 8 0 123 0 256c0 138.4 113.6 248 247.6 248C377.5 504 496 403 496 256 496 118 389.4 8 247.6 8zm.8 450.8c-112.5 0-203.7-93-203.7-202.8 0-105.5 85.5-203.3 203.8-203.3A201.7 201.7 0 01451.3 256c0 121.7-99.7 202.9-202.9 202.9z'/%3E%3C/svg%3E");
        content: ' ';
        height: 10rem;
        width: 10rem;
        right: -2rem;
        top: -2rem;
        opacity: .1;
    }

</style>

    

    
        <!--
        <link rel="stylesheet" href="/css/page.css" media="print"
            onload="this.media='all';this.onload=null">
        <noscript>-->
            <link rel="stylesheet" href="/css/page.css">
        <!--</noscript>-->
    
    
    <link rel="stylesheet" href="/css/main.css" media="print" onload="this.media='all';this.onload=null">
    <noscript>
        <link rel="stylesheet" href="/css/main.css">
    </noscript>

    
    <script src="/js/main.js"></script>
    
      
<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

    <body>
        <header>
            
<div class="header__left">
	<a href="/" class="button"><span class="logo__text">主页</span></a>
</div>
<div class="header__right">
	<div class="navbar__menus">
		
		<a href="/" class="button">
			<div class="navbar-menu">首页</div>
		</a>
		
		<a href="/archives/" class="button">
			<div class="navbar-menu">归档</div>
		</a>
		
		<a href="/categories/" class="button">
			<div class="navbar-menu">分类</div>
		</a>
		
		<a href="/tags/" class="button">
			<div class="navbar-menu">标签</div>
		</a>
		
		<a href="/about/" class="button">
			<div class="navbar-menu">关于</div>
		</a>
		
	</div>
	
	<a href="/search/" class="button">
		<div id="btn-search">
			<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1024 1024" width="24" height="24" fill="currentColor"
				stroke="currentColor" stroke-width="32">
				<path
					d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z">
				</path>
			</svg>
		</div>
	</a>
	
	<a href="javaScript:void(0);" class="button" id="btn-toggle-dark">
		<div>
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none"
				stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
			</svg>
		</div>
	</a>
	<a href="javaScript:void(0);" class="dropdown-icon button">
		<div id="btn-dropdown">
			<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1024 1024" width="24" height="24" fill="currentColor"
				stroke="currentColor" stroke-width="32" stroke-linecap="round">
				<path
					d="M903.43 561.52H148.8c-13.25 0-24-10.75-24-24s10.75-24 24-24h754.63c13.25 0 24 10.75 24 24s-10.75 24-24 24zM903.43 204.31H148.8c-13.25 0-24-10.75-24-24s10.75-24 24-24h754.63c13.25 0 24 10.75 24 24s-10.75 24-24 24zM903.43 918.73H148.8c-13.25 0-24-10.75-24-24s10.75-24 24-24h754.63c13.25 0 24 10.75 24 24s-10.75 24-24 24z"
					fill="currentColor"></path>
			</svg>
		</div>
	</a>
	<div class="dropdown-menus" id="dropdown-menus">
		
		<a href="/" class="dropdown-menu button">首页</a>
		<br>
		
		<a href="/archives/" class="dropdown-menu button">归档</a>
		<br>
		
		<a href="/categories/" class="dropdown-menu button">分类</a>
		<br>
		
		<a href="/tags/" class="dropdown-menu button">标签</a>
		<br>
		
		<a href="/about/" class="dropdown-menu button">关于</a>
		<br>
		
	</div>
</div>

        </header>
        <div id="top"></div>
        <div id="page-main" class="main-content">
        <div class="mg-top">
            

<article class="page">
<div id="post-meta-m">
    <div class="post-meta" id="post-meta">
  <h3>Opencv基础学习笔记</h3>
    
      <span class="post-meta-label">
        Big Ben
      </span>
    
    
      <span class="post-meta-label">
        <span class="p-dot"></span>
        <time datetime="2025-08-07 20:40" pubdate>
          2025-08-07
        </time>
      </span>
    
    
      
      <span class="post-meta">
        <span class="p-dot"></span>
        共 7.7k 字
      </span>
    
    
    
  </div>
  
</div>
<div class="article-m">
  <div class="post-toc">
    
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#opencv%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text"> Opencv基础学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.</span> <span class="toc-text"> 图像基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 图像读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E4%BF%9D%E5%AD%98"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 图像保存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E8%AF%BB%E5%8F%96"><span class="toc-number">1.1.3.</span> <span class="toc-text"> 视频读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%AA%E5%8F%96%E9%83%A8%E5%88%86%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.4.</span> <span class="toc-text"> 截取部分图像数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2%E9%80%9A%E9%81%93%E6%8F%90%E5%8F%96"><span class="toc-number">1.1.5.</span> <span class="toc-text"> 颜色通道提取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%AF%B9%E6%AF%94%E5%BA%A6%E5%92%8C%E4%BA%AE%E5%BA%A6"><span class="toc-number">1.1.6.</span> <span class="toc-text"> 调整对比度和亮度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%98%E5%88%B6%E5%9F%BA%E6%9C%AC%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%96%87%E6%9C%AC"><span class="toc-number">1.1.7.</span> <span class="toc-text"> 绘制基本图形和文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E5%A1%AB%E5%85%85"><span class="toc-number">1.1.8.</span> <span class="toc-text"> 边界填充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E8%9E%8D%E5%90%88"><span class="toc-number">1.1.9.</span> <span class="toc-text"> 图像融合</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E9%98%88%E5%80%BC%E4%B8%8E%E5%B9%B3%E6%BB%91%E5%A4%84%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text"> 图像阈值与平滑处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E9%98%88%E5%80%BC"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 图像阈值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E6%BB%A4%E6%B3%A2"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 图像滤波</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E5%80%BC%E6%BB%A4%E6%B3%A2"><span class="toc-number">1.2.2.1.</span> <span class="toc-text"> 中值滤波</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E8%BE%B9%E6%BB%A4%E6%B3%A2"><span class="toc-number">1.2.2.2.</span> <span class="toc-text"> 双边滤波</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E5%BD%A2%E6%80%81%E5%AD%A6"><span class="toc-number">1.3.</span> <span class="toc-text"> 图像形态学</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%85%90%E8%9A%80"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 腐蚀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%86%A8%E8%83%80"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 膨胀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E8%BF%90%E7%AE%97%E4%B8%8E%E9%97%AD%E8%BF%90%E7%AE%97"><span class="toc-number">1.3.3.</span> <span class="toc-text"> 开运算与闭运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%A2%E6%80%81%E5%AD%A6%E6%A2%AF%E5%BA%A6%E8%AE%A1%E7%AE%97"><span class="toc-number">1.3.4.</span> <span class="toc-text"> 形态学梯度计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BC%E5%B8%BD%E4%B8%8E%E9%BB%91%E5%B8%BD"><span class="toc-number">1.3.5.</span> <span class="toc-text"> 礼帽与黑帽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8F%96%E5%9B%BE%E7%89%87%E4%B8%AD%E6%B0%B4%E5%B9%B3%E7%BA%BF%E5%92%8C%E5%9E%82%E7%9B%B4%E7%BA%BF"><span class="toc-number">1.3.6.</span> <span class="toc-text"> 提取图片中水平线和垂直线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scharr%E7%AE%97%E5%AD%90"><span class="toc-number">1.3.7.</span> <span class="toc-text"> Scharr算子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#laplacian%E7%AE%97%E5%AD%90"><span class="toc-number">1.3.8.</span> <span class="toc-text"> laplacian算子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E5%AD%90%E5%AF%B9%E6%AF%94"><span class="toc-number">1.3.9.</span> <span class="toc-text"> 算子对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B"><span class="toc-number">1.4.</span> <span class="toc-text"> 边缘检测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#canny%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text"> Canny边缘检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%8D%E5%A4%AB%E5%9C%86"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 霍夫圆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%83%8F%E7%B4%A0%E9%87%8D%E6%98%A0%E5%B0%84"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 像素重映射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E9%87%91%E5%AD%97%E5%A1%94"><span class="toc-number">1.5.</span> <span class="toc-text"> 图像金字塔</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE%E4%B8%8E%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2"><span class="toc-number">1.6.</span> <span class="toc-text"> 直方图与傅里叶变换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="toc-number">1.6.1.</span> <span class="toc-text"> 直方图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96"><span class="toc-number">1.6.2.</span> <span class="toc-text"> 直方图均衡化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE%E6%AF%94%E8%BE%83%E6%96%B9%E6%B3%95"><span class="toc-number">1.6.3.</span> <span class="toc-text"> 直方图比较方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D"><span class="toc-number">1.6.4.</span> <span class="toc-text"> 模板匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E8%BD%AE%E5%BB%93"><span class="toc-number">1.6.5.</span> <span class="toc-text"> 图像轮廓</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AE%E5%BB%93%E7%89%B9%E5%BE%81"><span class="toc-number">1.6.6.</span> <span class="toc-text"> 轮廓特征</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AE%E5%BB%93%E5%91%A8%E5%9B%B4%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2"><span class="toc-number">1.6.7.</span> <span class="toc-text"> 轮廓周围绘制矩形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%B8%E5%8C%85convex-hull"><span class="toc-number">1.6.8.</span> <span class="toc-text"> 凸包（Convex Hull）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E7%9F%A9"><span class="toc-number">1.6.9.</span> <span class="toc-text"> 图像矩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%A4%9A%E8%BE%B9%E5%BD%A2%E6%B5%8B%E8%AF%95"><span class="toc-number">1.6.10.</span> <span class="toc-text"> 点多边形测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2"><span class="toc-number">1.6.11.</span> <span class="toc-text"> 傅里叶变换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.7.</span> <span class="toc-text"> 项目</span></a></li></ol></li></ol>
    
  </div>
    <div id="article">
      <div id="post-content" class="markdown-body textretty">
        <h1 id="opencv基础学习笔记"><a class="markdownIt-Anchor" href="#opencv基础学习笔记"></a> Opencv基础学习笔记</h1>
<p>Opencv基础部分，以前学过，做个笔记用于复习；</p>
<p>当然我建议学C++版本，更齐全，Python版本的课程教学内容缺太多了；</p>
<p>[<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Q54y1z7kz?spm_id_from=333.788.videopod.episodes&amp;vd_source=2686d8279192347a7d56afcb53bb00d9">opencv_C++] 入门强推！！！【B站最全】_哔哩哔哩_bilibili</a></p>
<h2 id="图像基本操作"><a class="markdownIt-Anchor" href="#图像基本操作"></a> 图像基本操作</h2>
<p>BGR：Blue Green Red</p>
<p>HSV：Hue(色调) Satration(饱和度) Value(明度)</p>
<p>Shape：[500, 500, 3] — [h, w, RGB]</p>
<p><img src="https://s2.loli.net/2025/08/07/mkij8ZIasTPVrdB.png" alt="" /></p>
<h3 id="图像读取"><a class="markdownIt-Anchor" href="#图像读取"></a> 图像读取</h3>
<ul>
<li>cv2.IMREAD_COLOR：彩色图像</li>
<li>cv2.IMREAD_GRAYSCALE：灰度图像</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 彩色图片</span></span><br><span class="line">img = cv2.imread(<span class="string">&quot;1.jpg&quot;</span>, cv2.IMREAD_COLOR)</span><br><span class="line"><span class="comment"># 灰度图片</span></span><br><span class="line"><span class="comment"># img = cv2.imread(&quot;1.jpg&quot;, cv2.IMREAD_GRAYSCALEa)</span></span><br><span class="line"><span class="comment"># 展示img的通道值</span></span><br><span class="line"><span class="comment"># print(img.shape)</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;Image&quot;</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 按下任意键关闭所有窗口</span></span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<h3 id="图像保存"><a class="markdownIt-Anchor" href="#图像保存"></a> 图像保存</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 读取图片1</span></span><br><span class="line">img1 = cv.imread(<span class="string">&quot;1.jpg&quot;</span>)</span><br><span class="line"><span class="comment"># 展示图片1</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;Image1&quot;</span>, img1)</span><br><span class="line"><span class="comment"># 图片1保存为图片2</span></span><br><span class="line">cv2.imwrite(<span class="string">&quot;2.jpg&quot;</span>, img)</span><br><span class="line"><span class="comment"># 读取图片2</span></span><br><span class="line">img2 = cv.imread(<span class="string">&quot;2.jpg&quot;</span>)</span><br><span class="line"><span class="comment"># 展示图片2</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;Image2&quot;</span>, img2)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img1 = cv.imread(<span class="string">&quot;1.jpg&quot;</span>)</span><br><span class="line"><span class="built_in">type</span>(img1)</span><br><span class="line"><span class="comment"># numpy.ndarray</span></span><br><span class="line">img1.size</span><br><span class="line"><span class="comment"># 207000</span></span><br><span class="line">img1.dtype</span><br><span class="line"><span class="comment"># dtype(&#x27;uint8&#x27;)</span></span><br></pre></td></tr></table></figure>
<h3 id="视频读取"><a class="markdownIt-Anchor" href="#视频读取"></a> 视频读取</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 打开本地摄像头</span></span><br><span class="line">vc = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">if</span> vc.isOpened():</span><br><span class="line">    <span class="built_in">open</span>, frame = vc.read()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">open</span> = <span class="literal">False</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">open</span>:</span><br><span class="line">    ret, frame = vc.read()</span><br><span class="line">    <span class="keyword">if</span> frame <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># BGR转灰度</span></span><br><span class="line">        gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span><br><span class="line">        cv2.imshow(<span class="string">&quot;res&quot;</span>, gray)</span><br><span class="line">        <span class="comment"># 按下Q键退出</span></span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">10</span>) &amp; <span class="number">0xFF</span> == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">vc.release()</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<h3 id="截取部分图像数据"><a class="markdownIt-Anchor" href="#截取部分图像数据"></a> 截取部分图像数据</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img1 = cv2.imread(<span class="string">&quot;1.jpg&quot;</span>)</span><br><span class="line">cv2.imshow(<span class="string">&quot;img1&quot;</span>, img1)</span><br><span class="line"><span class="comment"># 截取200x200</span></span><br><span class="line">img2 = img1[<span class="number">0</span>:<span class="number">200</span>, <span class="number">0</span>:<span class="number">200</span>]</span><br><span class="line">cv2.imshow(<span class="string">&quot;img2&quot;</span>, img2)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/rlneymuaKTJP76S.png" style="zoom:50%;" />
<h3 id="颜色通道提取"><a class="markdownIt-Anchor" href="#颜色通道提取"></a> 颜色通道提取</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># split，把多通道图像分为多个单通道图像</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img1 = cv2.imread(<span class="string">&quot;1.jpg&quot;</span>)</span><br><span class="line">cv2.imshow(<span class="string">&quot;img1&quot;</span>, img1)</span><br><span class="line"><span class="comment"># 颜色通道提取</span></span><br><span class="line">b, g, r = cv2.split(img1)</span><br><span class="line"><span class="built_in">print</span>(b, g, r)</span><br><span class="line"><span class="comment"># 通道合并</span></span><br><span class="line">img2 = cv2.merge((b, g, r))</span><br><span class="line">cv2.imshow(<span class="string">&quot;img2&quot;</span>, img2)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"><span class="comment"># 只保留B</span></span><br><span class="line"><span class="comment"># cur_img = img1.copy()</span></span><br><span class="line"><span class="comment"># cur_img[:, :, 1] = 0</span></span><br><span class="line"><span class="comment"># cur_img[:, :, 2] = 0</span></span><br><span class="line"><span class="comment"># cv2.imshow(&quot;B&quot;, cur_img)</span></span><br><span class="line"><span class="comment"># 只保留G</span></span><br><span class="line"><span class="comment"># cur_img = img1.copy()</span></span><br><span class="line"><span class="comment"># cur_img[:, :, 0] = 0</span></span><br><span class="line"><span class="comment"># cur_img[:, :, 2] = 0</span></span><br><span class="line"><span class="comment"># cv2.imshow(&quot;G&quot;, cur_img)</span></span><br><span class="line"><span class="comment"># 只保留R</span></span><br><span class="line"><span class="comment"># cur_img = img1.copy()</span></span><br><span class="line"><span class="comment"># cur_img[:, :, 0] = 0</span></span><br><span class="line"><span class="comment"># cur_img[:, :, 1] = 0</span></span><br><span class="line"><span class="comment"># cv2.imshow(&quot;R&quot;, cur_img)</span></span><br></pre></td></tr></table></figure>
<h3 id="调整对比度和亮度"><a class="markdownIt-Anchor" href="#调整对比度和亮度"></a> 调整对比度和亮度</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入所需的库</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取输入图像</span></span><br><span class="line">image = cv2.imread(<span class="string">&#x27;1.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义alpha和beta</span></span><br><span class="line">alpha = <span class="number">1.5</span> <span class="comment">#对比度控制</span></span><br><span class="line">beta  = <span class="number">10</span>  <span class="comment">#亮度控制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#调用convertScaleAbs函数</span></span><br><span class="line">adjusted = cv2.convertScaleAbs(image, alpha=alpha, beta=beta)</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示输出图像</span></span><br><span class="line">cv2.imshow(<span class="string">&#x27;adjusted&#x27;</span>, adjusted)</span><br><span class="line">cv2.waitKey()</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<h3 id="绘制基本图形和文本"><a class="markdownIt-Anchor" href="#绘制基本图形和文本"></a> 绘制基本图形和文本</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 直线</span></span><br><span class="line"><span class="comment"># image：需绘制直线的图像</span></span><br><span class="line"><span class="comment"># starting cordinates ：直线的起点</span></span><br><span class="line"><span class="comment"># ending cordinates ：直线的终点</span></span><br><span class="line"><span class="comment"># color ：线的颜色</span></span><br><span class="line"><span class="comment"># thickness ：线的粗细像素</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.line(image,starting cordinates,ending cordinates,color,thickness)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 创建一个黑色面板</span></span><br><span class="line">image = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>),np.uint8)</span><br><span class="line"><span class="comment"># 画直线</span></span><br><span class="line">cv2.line(image,(<span class="number">0</span>,<span class="number">0</span>),(<span class="number">511</span>,<span class="number">511</span>),(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),<span class="number">3</span>)</span><br><span class="line"><span class="comment">#色彩空间转换</span></span><br><span class="line">image = cv2.cvtColor(image,cv2.COLOR_BGR2RGB)</span><br><span class="line">cv2.imshow(<span class="string">&quot;绘制直线&quot;</span>,image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 矩形</span></span><br><span class="line"><span class="comment"># image：需绘制矩形的图像</span></span><br><span class="line"><span class="comment"># starting vertex ：矩形的左上角顶点</span></span><br><span class="line"><span class="comment"># opposit vertex ：矩形的右下角顶点</span></span><br><span class="line"><span class="comment"># color ：线的颜色</span></span><br><span class="line"><span class="comment"># thickness ：线的粗细像素，-1表示填充</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.rectangle(image,starting vertex,opposit vertex,color,thickness)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 创建一个黑色面板</span></span><br><span class="line">image = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>),np.uint8)    </span><br><span class="line"><span class="comment"># 画大矩形</span></span><br><span class="line">cv2.rectangle(image,(<span class="number">100</span>,<span class="number">100</span>),(<span class="number">400</span>,<span class="number">400</span>),(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),<span class="number">2</span>)   </span><br><span class="line"><span class="comment"># 画小矩形</span></span><br><span class="line">cv2.rectangle(image,(<span class="number">200</span>,<span class="number">200</span>),(<span class="number">300</span>,<span class="number">300</span>),(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),-<span class="number">1</span>)  </span><br><span class="line"><span class="comment"># 色彩空间转换</span></span><br><span class="line">image = cv2.cvtColor(image,cv2.COLOR_BGR2RGB)  </span><br><span class="line">cv2.imshow(<span class="string">&quot;绘制矩形&quot;</span>,image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 圆</span></span><br><span class="line"><span class="comment"># image：需绘制圆的图像</span></span><br><span class="line"><span class="comment"># center：所绘制圆的圆心坐标</span></span><br><span class="line"><span class="comment"># radius：圆的半径</span></span><br><span class="line"><span class="comment"># color：圆的颜色</span></span><br><span class="line"><span class="comment"># fill：线的粗细像素，-1表示填充</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.cirlce(image,center,radius,color,fill)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment">#创建一个黑色面板</span></span><br><span class="line">image = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>),np.uint8)   </span><br><span class="line"><span class="comment">#画空心圆</span></span><br><span class="line">cv2.circle(image,(<span class="number">150</span>,<span class="number">150</span>),<span class="number">100</span>,(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),<span class="number">2</span>)  </span><br><span class="line"><span class="comment">#画实心圆</span></span><br><span class="line">cv2.circle(image,(<span class="number">350</span>,<span class="number">350</span>),<span class="number">100</span>,(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),-<span class="number">1</span>)   </span><br><span class="line"><span class="comment">#色彩空间转换</span></span><br><span class="line">image = cv2.cvtColor(image,cv2.COLOR_BGR2RGB)  </span><br><span class="line">cv2.imshow(<span class="string">&quot;绘制圆&quot;</span>,image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 椭圆</span></span><br><span class="line"><span class="comment"># image:绘制椭圆的图像。</span></span><br><span class="line"><span class="comment"># centerCoordinates:它是椭圆的中心坐标。</span></span><br><span class="line"><span class="comment"># axesLength:它包含两个变量的元组，分别包含椭圆的长轴和短轴的长度</span></span><br><span class="line"><span class="comment"># angle:椭圆旋转角度，以度为单位。</span></span><br><span class="line"><span class="comment"># startAngle:椭圆弧的起始角度，以度为单位。</span></span><br><span class="line"><span class="comment"># endAngle:椭圆弧的终止角度，以度为单位。</span></span><br><span class="line"><span class="comment"># color:它是要绘制的形状边界线的颜色。</span></span><br><span class="line"><span class="comment"># thickness:是形状边界线的粗细像素。-1表示将用指定的颜色填充形状。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.ellipse(image, centerCoordinates, axesLength, angle, startAngle, endAngle, color, thickness)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 创建一个黑色面板</span></span><br><span class="line">image = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>),np.uint8)    </span><br><span class="line"><span class="comment"># 画半个椭圆</span></span><br><span class="line">cv2.ellipse(image,(<span class="number">150</span>,<span class="number">150</span>),(<span class="number">100</span>,<span class="number">50</span>),<span class="number">0</span>,<span class="number">0</span>,<span class="number">180</span>,(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),-<span class="number">1</span>)  </span><br><span class="line"><span class="comment"># 画45度角的整个椭圆</span></span><br><span class="line">cv2.ellipse(image,(<span class="number">350</span>,<span class="number">350</span>),(<span class="number">100</span>,<span class="number">50</span>),<span class="number">45</span>,<span class="number">0</span>,<span class="number">360</span>,(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),-<span class="number">1</span>) </span><br><span class="line"><span class="comment"># 色彩空间转换</span></span><br><span class="line">image = cv2.cvtColor(image,cv2.COLOR_BGR2RGB)  </span><br><span class="line">cv2.imshow(<span class="string">&quot;绘制椭圆&quot;</span>,image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 画多边形</span></span><br><span class="line"><span class="comment"># img：绘制椭圆的图像。</span></span><br><span class="line"><span class="comment"># pts：绘制的顶点</span></span><br><span class="line"><span class="comment"># color：线的颜色</span></span><br><span class="line"><span class="comment"># thickness： 厚度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.polylines(image,[pts],True,color,thickness)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment"># 创建一个黑色面板</span></span><br><span class="line">image = np.zeros((<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>),np.uint8)</span><br><span class="line"><span class="comment"># 构建多边形的顶点</span></span><br><span class="line">pts = np.array([[<span class="number">200</span>,<span class="number">100</span>],[<span class="number">200</span>,<span class="number">500</span>],[<span class="number">50</span>,<span class="number">300</span>],[<span class="number">500</span>,<span class="number">200</span>],[<span class="number">500</span>,<span class="number">400</span>]],np.int32)  </span><br><span class="line"><span class="comment"># 以折线画图</span></span><br><span class="line">cv2.polylines(image,[pts],<span class="literal">True</span>,(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>),<span class="number">3</span>)   </span><br><span class="line"><span class="comment"># 色彩空间转换</span></span><br><span class="line">image = cv2.cvtColor(image,cv2.COLOR_BGR2RGB)  </span><br><span class="line">cv2.imshow(<span class="string">&quot;绘制多边形&quot;</span>,image)</span><br><span class="line">cv2.waitKey(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制英文文本</span></span><br><span class="line"><span class="comment"># img：表示在那个图片上放置文本内容</span></span><br><span class="line"><span class="comment"># text：要绘制的文本内容</span></span><br><span class="line"><span class="comment"># org：文本在图片中的左下角坐标</span></span><br><span class="line"><span class="comment"># fontFace：字体类型即字体，通过cv2.FONT_可查看字体类型</span></span><br><span class="line"><span class="comment"># fontScale：字体大小</span></span><br><span class="line"><span class="comment"># color：字体颜色</span></span><br><span class="line"><span class="comment"># thickness：字体粗细</span></span><br><span class="line"><span class="comment"># lineType：边界类型</span></span><br><span class="line"><span class="comment"># bottomLeftOrigin：默认为True，表示图片数据源在左下角；为False，表示图片数据源在左上角</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字体</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_SIMPLEX - 正常大小无衬线字体</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_PLAIN - 小号无衬线字体</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_DUPLEX - 正常大小无衬线字体比(更复杂)</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_COMPLEX - 正常大小有衬线字体</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_TRIPLEX - 正常大小有衬线字体(更复杂)</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_COMPLEX_SMALL</span></span><br><span class="line"><span class="comment"># cv2.FONT_HERSHEY_SCRIPT_SIMPLEX - 手写风格字体。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.putText(img, text, org, fontFace, fontScale, color[, thickness[, lineType[, bottomLeftOrigin]]])</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 创建纯黑的背景图用来画图形</span></span><br><span class="line">img = np.zeros((<span class="number">800</span>, <span class="number">800</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line"><span class="comment"># 绘制文本</span></span><br><span class="line">cv2.putText(img, <span class="string">&#x27;Hello OpenCV&#x27;</span>, (<span class="number">50</span>,<span class="number">400</span>), cv2.FONT_HERSHEY_COMPLEX, <span class="number">2</span>, [<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>])</span><br><span class="line">cv2.imshow(<span class="string">&#x27;draw&#x27;</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 绘制中文</span></span><br><span class="line"><span class="comment"># 安装pillow：pip install pillow</span></span><br><span class="line"><span class="comment"># 使用Pillow包绘制中文文本.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageFont, ImageDraw, Image</span><br><span class="line"><span class="comment"># 纯白背景</span></span><br><span class="line">img = np.full((<span class="number">500</span>, <span class="number">500</span>, <span class="number">3</span>), fill_value=<span class="number">255</span>, dtype=np.uint8)</span><br><span class="line"><span class="comment"># 导入字体文件，要自己下字体</span></span><br><span class="line">font = ImageFont.truetype(<span class="string">&#x27;./msyh.ttc&#x27;</span>, <span class="number">35</span>)</span><br><span class="line"><span class="comment"># 创建一个pillow的图片</span></span><br><span class="line">img_pil = Image.fromarray(img)</span><br><span class="line"><span class="comment"># 绘制pillow图片</span></span><br><span class="line">draw = ImageDraw.Draw(img_pil)</span><br><span class="line"><span class="comment"># 利用draw去绘制中文</span></span><br><span class="line">draw.text((<span class="number">100</span>, <span class="number">250</span>), <span class="string">&#x27;快跑，别用Python，用C++!!!&#x27;</span>, font=font, fill=(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))</span><br><span class="line"><span class="comment"># 重新变回ndarray</span></span><br><span class="line">img = np.array(img_pil)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;img&#x27;</span> ,img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="边界填充"><a class="markdownIt-Anchor" href="#边界填充"></a> 边界填充</h3>
<p><strong>改变图片最外围的边框</strong></p>
<ul>
<li>BORDER_<strong>REPLICATE</strong>：复制法，<strong>复制最边缘像素</strong>。</li>
<li>BORDER_<strong>REFLECT</strong>：反射法，对图像中的像素进行<strong>镜像复制</strong>：<strong>fedcba|abcdefgh|hgfedcb</strong></li>
<li>BORDER_<strong>REFLECT_101</strong>：反射法，以最边缘像素为轴，<strong>对称</strong>，<strong>gfedcb|abcdefgh|gfedcba</strong></li>
<li>BORDER_<strong>WRAP</strong>：<strong>外包装法cdefgh|abcdefgh|abcdefg</strong></li>
<li>BORDER_<strong>CONSTANT</strong>：常量法，<strong>常数值填充</strong>。</li>
</ul>
<p><img src="https://s2.loli.net/2025/08/07/U4HaOiIdogCMEnk.png" alt="" /></p>
<h3 id="图像融合"><a class="markdownIt-Anchor" href="#图像融合"></a> 图像融合</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img_cat = cv2.imread(<span class="string">&#x27;1.jpg&#x27;</span>)</span><br><span class="line">img_dog = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line"><span class="comment"># 设置同样大小</span></span><br><span class="line">img_dog = cv2.resize(img_dog, (<span class="number">639</span>, <span class="number">640</span>))</span><br><span class="line"><span class="comment"># 设置权重, res = x1 * a + x2 * b + c </span></span><br><span class="line">res = cv2.addWeighted(img_cat, <span class="number">0.4</span>, img_dog, <span class="number">0.6</span>, <span class="number">0</span>)</span><br><span class="line">cv2.imshow(<span class="string">&quot;res&quot;</span>, res)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/e3w5QuVWdzCSR7F.png" style="zoom:25%;" />
<h2 id="图像阈值与平滑处理"><a class="markdownIt-Anchor" href="#图像阈值与平滑处理"></a> 图像阈值与平滑处理</h2>
<h3 id="图像阈值"><a class="markdownIt-Anchor" href="#图像阈值"></a> 图像阈值</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src： 输入图，只能输入单通道图像，通常来说为灰度图</span></span><br><span class="line"><span class="comment"># dst： 输出图</span></span><br><span class="line"><span class="comment"># thresh： 阈值，0-255</span></span><br><span class="line"><span class="comment"># maxval： 像素最大可得值</span></span><br><span class="line"><span class="comment"># type：二值化操作的类型</span></span><br><span class="line">ret, dst = cv2.threshold(src, thresh, maxval, <span class="built_in">type</span>)</span><br></pre></td></tr></table></figure>
<p>type为如下操作</p>
<ul>
<li>
<p><strong>cv2.THRESH_BINARY</strong> 超过阈值部分取maxval，其他取0</p>
</li>
<li>
<p><strong>cv2.THRESH_BINARY_INV</strong> 超过阈值部分取0，其他取maxval</p>
</li>
<li>
<p><strong>cv2.THRESH_TRUNC</strong> 大于阈值部分设为阈值，其他不变</p>
</li>
<li>
<p><strong>cv2.THRESH_TOZERO</strong> 大于阈值部分不变，其他为0</p>
</li>
<li>
<p><strong>cv2.THRESH_TOZERO_INV</strong> 大于阈值部分为0，其他不变</p>
</li>
</ul>
<p><strong>常常配合createTrackbar使用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># name：滑动条的名字，</span></span><br><span class="line"><span class="comment"># dst：滑动条被放置的窗口的名字，</span></span><br><span class="line"><span class="comment"># default：滑动条默认值，</span></span><br><span class="line"><span class="comment"># max_value：滑动条的最大值，</span></span><br><span class="line"><span class="comment"># fun：回调函数，每次滑动都会调用回调函数。</span></span><br><span class="line">cv2.createTrackbar(name, dst, default, max_value, fun)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到滑动条的数值</span></span><br><span class="line">cv2.getTrackbarPos()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置滑动条的默认值</span></span><br><span class="line">cv2.setTrackbarPos(name, dst, default)</span><br></pre></td></tr></table></figure>
<h3 id="图像滤波"><a class="markdownIt-Anchor" href="#图像滤波"></a> 图像滤波</h3>
<p><strong>滤波</strong>的意义是为了让图片更加平滑，<strong>减少噪声</strong>。</p>
<h4 id="中值滤波"><a class="markdownIt-Anchor" href="#中值滤波"></a> 中值滤波</h4>
<img src="https://s2.loli.net/2025/08/07/swbGcHMxkKUXdoI.png" style="zoom:50%;" />
<h4 id="双边滤波"><a class="markdownIt-Anchor" href="#双边滤波"></a> 双边滤波</h4>
<p>双边滤波计算某一个像素点的新值时，不仅考虑距离信息（距离越远，权重越小），还考虑色彩信息（色彩差别越大，权重越小)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.bilateralFilter(src, d, sigmaColor, sigmaSpace, borderType)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img1 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">img1 = cv2.resize(img1, (<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line"><span class="comment"># 均值滤波</span></span><br><span class="line"><span class="comment"># 简单的平均卷积操作</span></span><br><span class="line">blur = cv2.blur(img1, (<span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line"><span class="comment"># 方框滤波</span></span><br><span class="line"><span class="comment"># 和均值差不多，可以选择归一化</span></span><br><span class="line">box1 = cv2.boxFilter(img1, -<span class="number">1</span>, (<span class="number">100</span>, <span class="number">100</span>), normalize=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># box2 = cv2.boxFilter(img1, -1, (3,3), normalize=False)</span></span><br><span class="line"><span class="comment"># 高斯滤波</span></span><br><span class="line"><span class="comment"># 高斯模糊的卷积核里的数值满足高斯分布，即更重视中间的</span></span><br><span class="line">gaussian = cv2.GaussianBlur(img1, (<span class="number">9</span>, <span class="number">9</span>), <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 中值滤波</span></span><br><span class="line"><span class="comment"># 相当于中值替代</span></span><br><span class="line">med = cv2.medianBlur(img1, <span class="number">9</span>)</span><br><span class="line">res = np.hstack((img1, blur, box1, gaussian, med))</span><br><span class="line">cv2.imshow(<span class="string">&quot;img, blur, box, gaussian, med&quot;</span>, res)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2025/08/07/RKmlzSne7Q1EsrD.png" alt="" /></p>
<h2 id="图像形态学"><a class="markdownIt-Anchor" href="#图像形态学"></a> 图像形态学</h2>
<h3 id="腐蚀"><a class="markdownIt-Anchor" href="#腐蚀"></a> 腐蚀</h3>
<p><strong>去除小型噪声、分离粘连物体、细化边缘</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">img2 = cv2.resize(img2, (<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">kernel = np.ones((<span class="number">30</span>, <span class="number">30</span>), np.uint8)</span><br><span class="line"><span class="comment"># 越来越黑</span></span><br><span class="line"><span class="comment"># 在kernel（30，30）的区域获取最大值赋值到对应pixel</span></span><br><span class="line">erosion_1 = cv2.erode(img2, kernel, iterations=<span class="number">1</span>)</span><br><span class="line">erosion_2 = cv2.erode(img2, kernel, iterations=<span class="number">2</span>)</span><br><span class="line">erosion_3 = cv2.erode(img2, kernel, iterations=<span class="number">3</span>)</span><br><span class="line">res = np.hstack((img2, erosion_1, erosion_2, erosion_3))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2025/08/07/pgO75fUdT34eHsC.png" alt="" /></p>
<h3 id="膨胀"><a class="markdownIt-Anchor" href="#膨胀"></a> 膨胀</h3>
<p><strong>连接断裂的物体部分、填充物体内部的小孔或空洞、扩大物体尺寸、去除孤立噪声点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">img2 = cv2.resize(img2, (<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">kernel = np.ones((<span class="number">30</span>, <span class="number">30</span>), np.uint8)</span><br><span class="line"><span class="comment"># 越来越白</span></span><br><span class="line"><span class="comment"># 在kernel（30，30）的区域获取最小值赋值到对应pixel</span></span><br><span class="line">dilate_1 = cv2.dilate(img2, kernel, iterations=<span class="number">1</span>)</span><br><span class="line">dilate_2 = cv2.dilate(img2, kernel, iterations=<span class="number">2</span>)</span><br><span class="line">dilate_3 = cv2.dilate(img2, kernel, iterations=<span class="number">3</span>)</span><br><span class="line">res = np.hstack((img2, dilate_1, dilate_2, dilate_3))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2025/08/07/qPGdz8hyXE251BV.png" alt="" /></p>
<h3 id="开运算与闭运算"><a class="markdownIt-Anchor" href="#开运算与闭运算"></a> 开运算与闭运算</h3>
<p><strong>开运算：消除细小噪声与孤立点、分离粘连物体、平滑物体外轮廓</strong></p>
<p>作用：医学图像中去除组织切片的小斑点、文本识别前清除文档扫描件的墨渍或断裂笔画</p>
<p><strong>闭运算：填充内部空洞与缝隙、连接临近物体、平滑内轮廓</strong></p>
<p>作用：工业检测中填补零件表面的微小缺陷、遥感图像中连接断裂的道路或河流</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">img2 = cv2.resize(img2, (<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line"><span class="comment"># 原图</span></span><br><span class="line">cv2.imshow(<span class="string">&#x27;img2&#x27;</span>, img2)</span><br><span class="line"><span class="comment"># 开：先腐蚀，再膨胀</span></span><br><span class="line">kernel = np.ones((<span class="number">10</span>, <span class="number">10</span>), np.uint8)</span><br><span class="line">opening = cv2.morphologyEx(img2, cv2.MORPH_OPEN, kernel)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;Opening&#x27;</span>, opening)</span><br><span class="line"><span class="comment"># 闭：先膨胀，再腐蚀</span></span><br><span class="line">kernel = np.ones((<span class="number">10</span>, <span class="number">10</span>), np.uint8)</span><br><span class="line">closing = cv2.morphologyEx(img2, cv2.MORPH_CLOSE, kernel)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;Closing&#x27;</span>, closing)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/Q8LIBtSwNy9WxEJ.png" style="zoom:60%;" />
<h3 id="形态学梯度计算"><a class="markdownIt-Anchor" href="#形态学梯度计算"></a> 形态学梯度计算</h3>
<p>边缘检测、特征提取、图像增强与锐化、光照估计与校正</p>
<p><strong>目标分割</strong>：结合梯度信息与区域生长算法，实现语义分割</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">img2 = cv2.resize(img2, (<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 梯度 = 膨胀 - 腐蚀，用膨胀的图像减去腐蚀的图像</span></span><br><span class="line">kernel = np.ones((<span class="number">4</span>, <span class="number">4</span>), np.uint8)</span><br><span class="line">gradient = cv2.morphologyEx(img2, cv2.MORPH_GRADIENT, kernel)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&#x27;gradient&#x27;</span>, gradient)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/g8hHCLPVjsceRaB.png" style="zoom:67%;" />
<h3 id="礼帽与黑帽"><a class="markdownIt-Anchor" href="#礼帽与黑帽"></a> 礼帽与黑帽</h3>
<p><strong>突出图像中的局部亮暗特征或校正光照不均匀</strong></p>
<ul>
<li><strong>礼帽 = 原始输入 - 开运算</strong>
<ul>
<li>突出原图像中<strong>更亮</strong>的局域</li>
</ul>
</li>
</ul>
<p>作用：提取比周围背景更亮的细小物体、消除不均匀光照的影响，增强微弱目标特征</p>
<p><strong>黑帽可以用于提取原图片里面的有特征的线/数字</strong></p>
<ul>
<li><strong>黑帽 = 闭运算 - 原始输入</strong>
<ul>
<li>突出原图像中<strong>更暗</strong>的局域</li>
</ul>
</li>
</ul>
<p>作用：提取比周围更暗的区域、通过闭运算填充亮背景中的暗水印，再减去原图实现去水印</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">img2 = cv2.resize(img2, (<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">kernel = np.ones((<span class="number">15</span>, <span class="number">15</span>),np.uint8)</span><br><span class="line"><span class="comment"># 礼帽</span></span><br><span class="line">tophat = cv2.morphologyEx(img2, cv2.MORPH_TOPHAT, kernel)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;Please&#x27;</span>, tophat)</span><br><span class="line"><span class="comment"># 黑帽</span></span><br><span class="line">blackhat = cv2.morphologyEx(img2, cv2.MORPH_BLACKHAT, kernel)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;Black&#x27;</span>, blackhat)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/9Wc5vUFCwGJ4dQB.png" style="zoom:67%;" />
<h3 id="提取图片中水平线和垂直线"><a class="markdownIt-Anchor" href="#提取图片中水平线和垂直线"></a> 提取图片中水平线和垂直线</h3>
<ul>
<li>
<p>读取图片，转灰度图像cv_BGR2GRAY</p>
</li>
<li>
<p>转二值图像adaptiveThreshold</p>
</li>
<li>
<p>获取形状和尺寸的结构元素getStructuringElement</p>
<ul>
<li>
<pre class="highlight"><code class="PYTHON"><span class="comment"># MODE</span>
<span class="comment"># 矩形：MORPH_RECT;</span>
<span class="comment"># 交叉形：MORPH_CROSS;</span>
<span class="comment"># 椭圆形：MORPH_ELLIPSE;</span>
<span class="comment"># SIZE -- 内核的尺寸，比如（11，1）</span>
<span class="comment"># POINT -- 锚点的位置，比如（-1，-1）</span>
kernel = cv2.getStructuringElement(MODE, SIZE, POINT)
&lt;!--code￼<span class="number">19</span>--&gt;

</code></pre>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="comment"># sobel 求导x</span></span><br><span class="line">sobelx = cv2.Sobel(img2, cv2.CV_64F, <span class="number">1</span>, <span class="number">0</span>, ksize=<span class="number">3</span>)</span><br><span class="line">sobelx = cv2.convertScaleAbs(sobelx)</span><br><span class="line"><span class="comment"># sobel 求导y</span></span><br><span class="line">sobely = cv2.Sobel(img2, cv2.CV_64F, <span class="number">0</span>, <span class="number">1</span>, ksize=<span class="number">3</span>)</span><br><span class="line">sobely = cv2.convertScaleAbs(sobely)</span><br><span class="line"><span class="comment"># sobel 求导x，y</span></span><br><span class="line">sobelxy=cv2.Sobel(img2, cv2.CV_64F, <span class="number">1</span>, <span class="number">1</span>, ksize=<span class="number">3</span>)</span><br><span class="line">sobelxy = cv2.convertScaleAbs(sobelxy)</span><br><span class="line">sob = np.hstack((sobelx, sobely, sobelxy))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;sob&#x27;</span>, sob)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/GfdDjvmSCH2E4rW.png" style="zoom:40%;" />
<h3 id="scharr算子"><a class="markdownIt-Anchor" href="#scharr算子"></a> Scharr算子</h3>
<img src="https://s2.loli.net/2025/08/07/Xl9h3PidIDsKkgy.png" style="zoom:67%;" />
<h3 id="laplacian算子"><a class="markdownIt-Anchor" href="#laplacian算子"></a> laplacian算子</h3>
<p>单独使用效果差，<strong>需配合高斯滤波（LOG算子）以抑制噪声</strong></p>
<img src="https://s2.loli.net/2025/08/07/NTHbXvCk7OISlom.png" style="zoom: 67%;" />
<p>处理流程：</p>
<ul>
<li>高斯模糊-去噪声GaussianBlur()</li>
<li>转换为灰度图像cvtColor()</li>
<li>拉普拉斯-二阶导数计算Laplacian()</li>
<li>取绝对值，显示结果convertScaleAbs()</li>
</ul>
<h3 id="算子对比"><a class="markdownIt-Anchor" href="#算子对比"></a> 算子对比</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 几种算子对比</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="comment"># sobel 求导x</span></span><br><span class="line">sobelx = cv2.Sobel(img2, cv2.CV_64F, <span class="number">1</span>, <span class="number">0</span>, ksize=<span class="number">3</span>)</span><br><span class="line">sobelx = cv2.convertScaleAbs(sobelx)</span><br><span class="line"><span class="comment"># sobel 求导y</span></span><br><span class="line">sobely = cv2.Sobel(img2, cv2.CV_64F, <span class="number">0</span>, <span class="number">1</span>, ksize=<span class="number">3</span>)</span><br><span class="line">sobely = cv2.convertScaleAbs(sobely)</span><br><span class="line"><span class="comment"># sobel 根据权重设置x, y</span></span><br><span class="line">sobelxy = cv2.addWeighted(sobelx, <span class="number">0.5</span>, sobely, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># scharr 求导x</span></span><br><span class="line">scharrx = cv2.Scharr(img2, cv2.CV_64F, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">scharrx = cv2.convertScaleAbs(scharrx)</span><br><span class="line"><span class="comment"># scharr 求导y</span></span><br><span class="line">scharry = cv2.Scharr(img2, cv2.CV_64F, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">scharry = cv2.convertScaleAbs(scharry)</span><br><span class="line"><span class="comment"># scharr 根据权重设置x, y</span></span><br><span class="line">scharrxy = cv2.addWeighted(scharrx, <span class="number">0.5</span>, scharry, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉普拉斯</span></span><br><span class="line">laplacian = cv2.Laplacian(img2, cv2.CV_64F)</span><br><span class="line">laplacian = cv2.convertScaleAbs(laplacian)</span><br><span class="line"></span><br><span class="line">res = np.hstack((sobelxy, scharrxy, laplacian))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<p>可以看出<strong>Scharr要比Sobel显示的边缘更多，而Laplacian显示的更少</strong></p>
<img src="https://s2.loli.net/2025/08/07/3cyeRWCjtFSgJqv.png" style="zoom: 50%;" />
<h2 id="边缘检测"><a class="markdownIt-Anchor" href="#边缘检测"></a> 边缘检测</h2>
<h3 id="canny边缘检测"><a class="markdownIt-Anchor" href="#canny边缘检测"></a> Canny边缘检测</h3>
<p>处理流程：</p>
<ul>
<li>
<p><strong>高斯模糊</strong>，用于平滑图像，滤除噪声</p>
</li>
<li>
<p><strong>灰度转换</strong></p>
</li>
<li>
<p><strong>计算</strong>图像中每个像素点的<strong>梯度强度和方向</strong></p>
</li>
<li>
<p><strong>非极大值</strong>（Non-Maximum Suppression）<strong>抑制</strong>，消除边缘检测带来的杂散响应</p>
</li>
<li>
<p>应用<strong>双阈值</strong>（Double-Threshold）检测来确定真实的和潜在的边缘。</p>
</li>
</ul>
<p>通过抑制孤立的弱边缘最终完成边缘检测。</p>
<ol>
<li><strong>高斯滤波器</strong></li>
</ol>
<img src="https://s2.loli.net/2025/08/07/vbWGPXjwdsI4QgV.png" style="zoom:60%;" />
<ol start="2">
<li><strong>计算梯度和方向</strong></li>
</ol>
<img src="https://s2.loli.net/2025/08/07/agxKpCfRTjw49tB.png" style="zoom:75%;" />
<ol start="3">
<li><strong>非极大值抑制</strong></li>
</ol>
<img src="https://s2.loli.net/2025/08/07/zFpHotQA3IwG7Eb.png" style="zoom: 67%;" />
<p><strong>线性插值法</strong>：<strong>distance(g1, g2)表示两点之间的距离</strong></p>
<p>​	设g1的梯度幅值M(g1), g2的梯度幅值M(g2)</p>
<p>​	则dtmp1可以得到：M(dtmp1) = w * M(g2) + (1 - w) * M(g1)</p>
<p>​	其中w = distance(dtmp1, g2) / distance(g1, g2)</p>
<ol start="4">
<li><strong>双阈值检测</strong></li>
</ol>
<img src="https://s2.loli.net/2025/08/07/wEfgW8tuRYrz5Fx.png" style="zoom:80%;" />
<p><strong>梯度 &gt; maxVal，则为maxVal；梯度 &lt; minVal，则为minVal</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># image：输入原图（必须为单通道图）</span></span><br><span class="line"><span class="string"># threshold1、2用于检测图像中明显的边缘</span></span><br><span class="line"><span class="string"># apertureSize：Sobel算子的大小</span></span><br><span class="line"><span class="string"># 参数(布尔值)：</span></span><br><span class="line"><span class="string">true：使用更精确的L2范数进行计算（即两个方向的倒数的平方和再开放）</span></span><br><span class="line"><span class="string">false：使用L1范数（直接将两个方向导数的绝对值相加）。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">cv2.Canny(image, threshold1, threshold2, [, edges[, apertureSize[, L2gradient]]])   </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"></span><br><span class="line">v1 = cv2.Canny(img2, <span class="number">160</span>, <span class="number">200</span>)</span><br><span class="line">v2 = cv2.Canny(img2, <span class="number">0</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">res = np.hstack((v1, v2))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/26BaAhmz4qFkjJC.png" style="zoom:33%;" />
<h3 id="霍夫圆"><a class="markdownIt-Anchor" href="#霍夫圆"></a> 霍夫圆</h3>
<p><strong>前提：边缘检测已经做完</strong></p>
<ol>
<li>把原图做一次<strong>Canny 边缘检测</strong>，得到<strong>边缘检测的二值图</strong></li>
<li>对原始图像执行一次 <strong>Sobel 算子</strong>，计算出<strong>所有像素的邻域梯度值</strong></li>
<li>初始化圆心空间 N(a, b)，令所有的 N(a, b)=0。若要求圆心在图像中，则a，b值的范围分别对应图像的宽高，N(a,b)表示一共有a * b个</li>
<li>遍历 Canny 边缘二值图中的所有非零像素点，沿着梯度方向 (切线的垂直方向，根据<strong>Sobel 算子计算出的垂直梯度及水平梯度得来)固定搜索半径范围画线</strong>，将线段经过的所有累加器中的点 (a,b) 的 N(a,b)+=1。</li>
</ol>
<img src="https://s2.loli.net/2025/08/07/YTWEaj3D6eBrm7X.png" style="zoom:67%;" />
<ol start="5">
<li>统计排序 N(a,b)，得到可能的圆心（<strong>N(a,b) 越大，越有可能是圆心</strong>）</li>
</ol>
<p><strong>大白话：给定一个半径R，对于所有的白色点，都i会进行半径为R的画圆；颜色越深，越令人信服。</strong></p>
<img src="https://s2.loli.net/2025/08/07/y2PrKDoGu6eMi5t.png" style="zoom:67%;" />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Circles：用来存储HoughCircles的结果，类型为list，list中对象格式为x,y,r</span></span><br><span class="line"><span class="comment"># image：输入图像，即源图像，8位单通道图像，如果使用彩色图像，需要先转换成灰度图像</span></span><br><span class="line"><span class="comment"># method：定义检测图像中圆的方法。目前唯一实现的方法是cv2.HOUGH_GRADIENT</span></span><br><span class="line"><span class="comment"># dp：图像像素分辨率与参数空间分辨率的比值（官方文档上写的是图像分辨率与累加器分辨率的比值，它把参数空间认为是一个累加器，毕竟里面存储的都是经过的像素点的数量），dp=1，则参数空间与图像像素空间（分辨率）一样大，dp=2，参数空间的分辨率只有像素空间的一半大；#通过设置dp可以减少计算量</span></span><br><span class="line"><span class="comment"># minDist：检测到的圆中心（x,y）坐标之间的最小距离。如果minDist太小，则会保留大部分圆心相近的圆。如果minDist太大，则会将圆心相近的圆进行合并（若两圆心距离 &lt; minDist，则认为是同一个圆）</span></span><br><span class="line"><span class="comment"># param1：canny 边缘检测的高阈值，低阈值被自动置为高阈值的一半，默认为 100</span></span><br><span class="line"><span class="comment"># param2：累加平面某点是否是圆心的判定阈值。大于该阈值才判断为圆。当值设置的很小是，检测到的圆越多。默认值为 100</span></span><br><span class="line"><span class="comment"># minRadius：半径的最小大小（以像素为单位）默认为 0</span></span><br><span class="line"><span class="comment"># maxRadius：半径的最大大小（以像素为单位）默认为 0</span></span><br><span class="line"></span><br><span class="line">circles=cv2.HoughCircles(image, cv2.HOUGH_GRADIENT, dp=<span class="number">1</span>, minDist=<span class="number">10</span>, param1=<span class="literal">None</span>, param2=<span class="literal">None</span>, minRadius=<span class="literal">None</span>, maxRadius=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bjxqmy/p/12333022.html">opencv —— HoughCircles 霍夫圆变换原理及圆检测 - 狂奔的小学生 - 博客园</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_74259636/article/details/132655935">opencv 十一 霍夫圆检测原理及高级使用案例（含优化步骤）-CSDN博客</a></p>
<h3 id="像素重映射"><a class="markdownIt-Anchor" href="#像素重映射"></a> 像素重映射</h3>
<p>重映射是从图像中的一个位置获取像素并将其放置在新图像中的另一位置的过程。</p>
<img src="https://s2.loli.net/2025/08/07/psiUVzTDf6vZW4w.png" style="zoom:40%;" />
<h2 id="图像金字塔"><a class="markdownIt-Anchor" href="#图像金字塔"></a> 图像金字塔</h2>
<p>图像金字塔是指一组图像且不同分辨率的子图集合，它是图像多尺度表达的一种，以多分辨率来解释图像的结构，主要用于图像的分割或压缩。</p>
<p>实际应用中需注意：</p>
<ul>
<li><strong>金字塔层数</strong>：通常4-6层，过多会导致信息冗余。</li>
<li><strong>结构元素</strong>：高斯核大小影响平滑效果（常用5×5）</li>
</ul>
<p><strong>图像增强：分层调整细节与对比度<br />
图像融合：无缝拼接不同图像<br />
目标检测：多尺度定位物体<br />
图像压缩：分层存储与渐进传输<br />
噪声抑制与光照校正</strong></p>
<ul>
<li><strong>向下采样方法（缩小）</strong></li>
<li><strong>向上采样方法（放大）</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pyrUp()放大图像，空白的像素点补0</span></span><br><span class="line"><span class="comment"># pyrDown()缩小图像，将奇数行和列去掉</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(img2.shape)</span><br><span class="line">up = cv2.pyrUp(img2)</span><br><span class="line"><span class="built_in">print</span>(up.shape)</span><br><span class="line">down = cv2.pyrDown(img2)</span><br><span class="line"><span class="built_in">print</span>(down.shape)</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"><span class="comment"># (360, 360, 3)</span></span><br><span class="line"><span class="comment"># (720, 720, 3)</span></span><br><span class="line"><span class="comment"># (180, 180, 3)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>拉普拉斯金字塔：<strong>lap = img2 - down</strong></li>
</ul>
<h2 id="直方图与傅里叶变换"><a class="markdownIt-Anchor" href="#直方图与傅里叶变换"></a> 直方图与傅里叶变换</h2>
<h3 id="直方图"><a class="markdownIt-Anchor" href="#直方图"></a> 直方图</h3>
<img src="https://s2.loli.net/2025/08/07/IKbZEPGeYR5A9Us.png" style="zoom:80%;" />
<p><strong>它是一种提高图像对比度的方法，拉伸图像灰度值范围</strong></p>
<p>直方图的<strong>横轴</strong>表示<strong>亮度</strong>，从左到右表示亮度从低到高</p>
<p>直方图的<strong>纵轴</strong>表示<strong>像素数量</strong>，从下到上表示像素从少到多。</p>
<p>直方图在<strong>某个亮度区间的凸起越高</strong>，就表示<strong>在这个亮度区间内的像素越多</strong></p>
<p>若直方图的<strong>凸起主要集中在左侧</strong>，则说明这张照片的<strong>亮度整体偏低</strong></p>
<p>作用：</p>
<ul>
<li>
<p>图像分析与诊断</p>
<ul>
<li>亮度与对比度评估</li>
<li>曝光检测</li>
</ul>
</li>
<li>
<p>图像增强</p>
<ul>
<li>直方图均衡化</li>
</ul>
</li>
<li>
<p>图像分割与阈值处理</p>
<ul>
<li>阈值选择</li>
<li>掩膜区域分析</li>
</ul>
</li>
<li>
<p>颜色分析与处理</p>
<ul>
<li>通道分离统计</li>
<li>颜色校正</li>
</ul>
</li>
<li>
<p>图像匹配与检索</p>
<ul>
<li>相似度比较</li>
<li>特征提取</li>
</ul>
</li>
</ul>
<p>四种基本类型：</p>
<ul>
<li>RGB直方图</li>
<li>通道直方图</li>
<li>明度直方图</li>
<li>颜色直方图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## images: 原图像图像格式为 uint8 或 ﬂoat32。当传入函数时应 用中括号 [] 括来例如[img]</span></span><br><span class="line"><span class="comment">## channels: 同样用中括号括来它会告函数我们统幅图 像的直方图。如果入图像是灰度图它的值就是 [0]如果是彩色图像 的传入的参数可以是 [0][1][2] 它们分别对应着 BGR。</span></span><br><span class="line"><span class="comment">## mask: 掩模图像。统整幅图像的直方图就把它为 None。但是如 果你想统图像某一分的直方图的你就制作一个掩模图像并 使用它。</span></span><br><span class="line"><span class="comment">## histSize:BIN 的数目。也应用中括号括来</span></span><br><span class="line"><span class="comment">## ranges: 像素值范围常为 [0,255]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.calcHist(images,channels,mask,histSize,ranges)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">&#x27;TkAgg&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">gray = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)</span><br><span class="line">hist = cv2.calcHist([gray], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line"></span><br><span class="line">plt.hist(img2.ravel(), <span class="number">256</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"><span class="comment"># 可以看出这张图片的灰度颜色大部分接近于150左右</span></span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/x8vBuU9FrTZqEzi.png" style="zoom: 33%;" />
<p><strong>mask功能</strong>：一张图片有时候不需要统计整张图片，而是统计最中间或者做边界的一部分图片，那么就可以在参数中加入mask，原理是<strong>选中的部分为1，非选中的部分为0</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建mask</span></span><br><span class="line">mask = np.zeros(img.shape[:<span class="number">2</span>], np.uint8)</span><br><span class="line">mask[<span class="number">100</span>:<span class="number">150</span>,<span class="number">100</span>:<span class="number">150</span>] = <span class="number">255</span></span><br><span class="line">plt.imshow(mask, <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line"></span><br><span class="line">img=cv2.imread(<span class="string">&#x27;1&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">mask_img=cv2.bitwise_and(img, img, mask=mask)<span class="comment">#图片之间与操作</span></span><br><span class="line">plt.imshow(mask_img)</span><br></pre></td></tr></table></figure>
<h3 id="直方图均衡化"><a class="markdownIt-Anchor" href="#直方图均衡化"></a> 直方图均衡化</h3>
<p>直方图均衡化会使<strong>图片突出的地方更加突出</strong>，可以增加图片的特征</p>
<p>计算原理：<strong>新灰度值 = 旧灰度值 * 累计概率</strong></p>
<p>累计概率 = 当前灰度值的概率 + 小于当前灰度值的概率</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># img必须是灰度图像</span></span><br><span class="line"><span class="comment"># equalizeHist(img)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">&#x27;TkAgg&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">plt.hist(img2.ravel(), <span class="number">256</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&quot;img2&quot;</span>, img2)</span><br><span class="line"></span><br><span class="line">equ = cv2.equalizeHist(img2)</span><br><span class="line">plt.hist(equ.ravel(), <span class="number">256</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&quot;equ&quot;</span>, equ)</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/saLK8TrhwxmgM3V.png" style="zoom:33%;" />
<img src="https://s2.loli.net/2025/08/07/KUq7p84DdfbTCBF.png" style="zoom:50%;" />
<img src="https://s2.loli.net/2025/08/07/Rn8AhbcCIUH5dXE.png" style="zoom:33%;" />
<img src="https://s2.loli.net/2025/08/07/9SK7i8LZQTr1epg.png" style="zoom:50%;" />
<p><strong>均衡化后的图片亮的地方更加亮，暗的地方更加暗</strong>，使图片的立体感更加强烈，但也有一定问题（自己搜吧）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">equ = cv2.equalizeHist(img2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自适应直方图均衡化</span></span><br><span class="line"><span class="comment"># clipLimit颜色对比度的阈值， titleGridSize进行像素均衡化的网格大小，即在多少网格下进行直方图的均衡化操作</span></span><br><span class="line">clahe = cv2.createCLAHE(clipLimit=<span class="number">2.0</span>, tileGridSize=(<span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line">res_clahe = clahe.apply(img2)</span><br><span class="line">res = np.hstack((img2, equ, res_clahe))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/6iTM4rtawRnmDC1.png" style="zoom:40%;" />
<h3 id="直方图比较方法"><a class="markdownIt-Anchor" href="#直方图比较方法"></a> 直方图比较方法</h3>
<ol>
<li>首先把图像从RGB色彩空间转换为HSV色彩空间，cvtColor</li>
<li>计算图像的直方图，然后归一化到[0 ~ 1]之间，calcHist和normalize</li>
<li>使用下列四方法之一进行比较，compareHist</li>
</ol>
<ul>
<li>Correlation：相关性比较</li>
</ul>
<img src="https://s2.loli.net/2025/08/07/95RLiWjFy7Vz4Pf.png" style="zoom:67%;" />
<ul>
<li>Chi-Square：卡方比较</li>
</ul>
<img src="https://s2.loli.net/2025/08/07/SCJsAcjoVtQxgrP.png" style="zoom:60%;" />
<ul>
<li>Intersection：十字交叉性</li>
</ul>
<img src="https://s2.loli.net/2025/08/07/tJK4yOA2HUnlx8Z.png" style="zoom:67%;" />
<ul>
<li>Bhattacharyya distance：巴氏距离</li>
</ul>
<img src="https://s2.loli.net/2025/08/07/2wlgNvcJdxU46IV.png" style="zoom:80%;" />
<h3 id="模板匹配"><a class="markdownIt-Anchor" href="#模板匹配"></a> 模板匹配</h3>
<p>模板在原图像上从原点开始滑动，计算模板与（图像被模板覆盖的地方）的<strong>差别</strong>程度</p>
<p><s>假如原图形是AxB大小，而模板是axb大小，则输出结果的矩阵是(A-a+1)x(B-b+1)</s></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">&#x27;TkAgg&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img1 = cv2.imread(<span class="string">&#x27;1.jpg&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">template = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">h, w = template.shape[:<span class="number">2</span>]</span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img,<span class="string">&#x27;gray&#x27;</span>),plt.title(<span class="string">&quot;img&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(template,<span class="string">&#x27;gray&#x27;</span>),plt.title(<span class="string">&quot;template&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<ul>
<li>TM_SQDIFF：计算平方不同，计算出来的值越小，越相关</li>
<li>TM_CCORR：计算相关性，计算出来的值越大，越相关</li>
<li>TM_CCOEFF：计算相关系数，计算出来的值越大，越相关</li>
<li>TM_SQDIFF_NORMED：计算归一化平方不同，计算出来的值越接近0，越相关</li>
<li>TM_CCORR_NORMED：计算归一化相关性，计算出来的值越接近1，越相关</li>
<li>TM_CCOEFF_NORMED：计算归一化相关系数，计算出来的值越接近1，越相关</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img_rgb=cv2.imread(<span class="string">&quot;mario.jpg&quot;</span>)</span><br><span class="line">img_gray=cv2.cvtColor(img_rgb,cv2.COLOR_BGR2GRAY)</span><br><span class="line">template=cv2.imread(<span class="string">&#x27;mario_coin.jpg&#x27;</span>,<span class="number">0</span>)</span><br><span class="line">h,w=template.shape[:<span class="number">2</span>]</span><br><span class="line">res=cv2.matchTemplate(img_gray,template,cv2.TM_CCOEFF_NORMED)</span><br><span class="line">threshold=<span class="number">0.8</span></span><br><span class="line">loc=np.where(res&gt;=threshold)</span><br><span class="line"><span class="keyword">for</span> pt <span class="keyword">in</span> <span class="built_in">zip</span>(*loc[::-<span class="number">1</span>]):</span><br><span class="line">    bottom_right=(pt[<span class="number">0</span>]+w,pt[<span class="number">1</span>]+h)</span><br><span class="line">    cv2.rectangle(img_rgb,pt,bottom_right,(<span class="number">255</span>,<span class="number">255</span>,<span class="number">0</span>),<span class="number">2</span>)</span><br><span class="line">cv2.imshow(<span class="string">&quot;img_rgb&quot;</span>,img_rgb)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/kZo9NUgBMuFsvYP.png" style="zoom:80%;" />
<h3 id="图像轮廓"><a class="markdownIt-Anchor" href="#图像轮廓"></a> 图像轮廓</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mode：轮廓检索模式</span></span><br><span class="line">	<span class="comment"># RETR_EXTERNAL：只检索最外面的轮廓；</span></span><br><span class="line">	<span class="comment"># RETR_LIST：检索所有的轮廓，并将其保存到一条链表当中；</span></span><br><span class="line">	<span class="comment"># RETR_CCOMP：检索所有的轮廓，并将他们组织为两层：顶层是各部分的外部边界，第二层是空洞的边界;</span></span><br><span class="line">	<span class="comment"># RETR_TREE：检索所有的轮廓，并重构嵌套轮廓的整个层次;</span></span><br><span class="line"><span class="comment"># method：轮廓逼近方法</span></span><br><span class="line">	<span class="comment"># CHAIN_APPROX_NONE：以Freeman链码的方式输出轮廓，所有其他方法输出多边形（顶点的序列）。</span></span><br><span class="line">	<span class="comment"># CHAIN_APPROX_SIMPLE：压缩水平的、垂直的和斜的部分，也就是函数只保留他们的终点部分。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## cv2.findContours(img, mode, method)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制轮廓</span></span><br><span class="line"><span class="comment">## cv2.drawContours</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line"><span class="comment"># 转灰度</span></span><br><span class="line">gray = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># 取色阈</span></span><br><span class="line">ret, thresh = cv2.threshold(gray, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line"><span class="comment"># 找边缘</span></span><br><span class="line">contours, hierarchy = cv2.findContours(thresh, cv2.RETR_TREE, cv2.CHAIN_APPROX_NONE)</span><br><span class="line">draw_img = img2.copy()</span><br><span class="line"><span class="comment"># 绘制边缘，-1表示显示所有轮廓</span></span><br><span class="line">res = cv2.drawContours(draw_img, contours, -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/YvDVyEAZHolpG4j.png" style="zoom:50%;" />
<h3 id="轮廓特征"><a class="markdownIt-Anchor" href="#轮廓特征"></a> 轮廓特征</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 书接上回，这里可以用于计算符合面积或者周长的各种形状</span></span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br><span class="line"><span class="comment">#面积</span></span><br><span class="line">cv2.contourArea(cnt)</span><br><span class="line"><span class="comment">#周长，True表示闭合的</span></span><br><span class="line">cv2.arcLength(cnt,<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h3 id="轮廓周围绘制矩形"><a class="markdownIt-Anchor" href="#轮廓周围绘制矩形"></a> 轮廓周围绘制矩形</h3>
<p>用最少的线来代替，在几个点之间的直线，如果能用更少的点来表示，就采用更少的点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># approxPolyDP</span></span><br><span class="line">epsilon = <span class="number">0.15</span> * cv2.arcLength(cnt, <span class="literal">True</span>) </span><br><span class="line">approx = cv2.approxPolyDP(cnt,epsilon,<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">draw_img2 = img2.copy()</span><br><span class="line">res = cv2.drawContours(draw_img, [approx], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">cv.imshow(<span class="string">&#x27;res&#x27;</span>, res)</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/bjNpcAW1aeYi2v5.png" style="zoom:70%;" />
<h3 id="凸包convex-hull"><a class="markdownIt-Anchor" href="#凸包convex-hull"></a> 凸包（Convex Hull）</h3>
<img src="https://s2.loli.net/2025/08/07/QkAbonj4RDZ3c2V.png" style="zoom:65%;" />
<h3 id="图像矩"><a class="markdownIt-Anchor" href="#图像矩"></a> 图像矩</h3>
<img src="https://s2.loli.net/2025/08/07/rB5Sxu1vq6MnLEs.png" style="zoom:80%;" />
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/FriendshipTang/article/details/126394301">OpenCV-Python快速入门（十一）：图像矩_python图像的矩-CSDN博客</a></p>
<h3 id="点多边形测试"><a class="markdownIt-Anchor" href="#点多边形测试"></a> 点多边形测试</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.pointPolygonTest</span><br></pre></td></tr></table></figure>
<h3 id="傅里叶变换"><a class="markdownIt-Anchor" href="#傅里叶变换"></a> 傅里叶变换</h3>
<p><strong>高频</strong>：变化<strong>剧烈</strong>的灰度分量，例如边界<br />
<strong>低频</strong>：变化<strong>缓慢</strong>的灰度分量，例如一片大海</p>
<p>滤波<br />
<strong>低通滤波器</strong>：只保留低频，会使得<strong>图像模糊</strong><br />
<strong>高通滤波器</strong>：只保留高频，会使得<strong>图像细节增强</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">&#x27;TkAgg&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img2 = cv2.imread(<span class="string">&#x27;2.jpg&#x27;</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 先转换成np.float32 格式</span></span><br><span class="line">img_float32 = np.float32(img2)</span><br><span class="line"><span class="comment"># 傅里叶变换</span></span><br><span class="line">dft = cv2.dft(img_float32, flags=cv2.DFT_COMPLEX_OUTPUT)</span><br><span class="line"><span class="comment"># 转换到中心位置</span></span><br><span class="line">dft_shift = np.fft.fftshift(dft)</span><br><span class="line"><span class="comment"># 得到灰度图能表示的形式</span></span><br><span class="line">magnitude_spectrum = <span class="number">20</span> * np.log(cv2.magnitude(dft_shift[:, :, <span class="number">0</span>], dft_shift[:, :, <span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>), plt.imshow(img2, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Input Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">122</span>), plt.imshow(magnitude_spectrum, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Magnitude Spectrum&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/5DryblzCuiZXG9f.png" style="zoom:67%;" />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;1.jpg&#x27;</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">img_float32 = np.float32(img)</span><br><span class="line"></span><br><span class="line">dft = cv2.dft(img_float32, flags = cv2.DFT_COMPLEX_OUTPUT)</span><br><span class="line">dft_shift = np.fft.fftshift(dft)</span><br><span class="line"></span><br><span class="line">rows, cols = img.shape</span><br><span class="line">crow, ccol = <span class="built_in">int</span>(rows/<span class="number">2</span>) , <span class="built_in">int</span>(cols/<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 低通滤波</span></span><br><span class="line">mask = np.zeros((rows, cols, <span class="number">2</span>), np.uint8)</span><br><span class="line">mask[crow-<span class="number">30</span>:crow+<span class="number">30</span>, ccol-<span class="number">30</span>:ccol+<span class="number">30</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## # 高通滤波</span></span><br><span class="line"><span class="comment">## mask = np.ones((rows, cols, 2), np.uint8)</span></span><br><span class="line"><span class="comment">## mask[crow-30:crow+30, ccol-30:ccol+30] = 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># IDFT</span></span><br><span class="line">fshift = dft_shift*mask</span><br><span class="line">f_ishift = np.fft.ifftshift(fshift)</span><br><span class="line">img_back = cv2.idft(f_ishift)</span><br><span class="line">img_back = cv2.magnitude(img_back[:,:,<span class="number">0</span>],img_back[:,:,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img, cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Input Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(img_back, cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Result&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">plt.show()                </span><br></pre></td></tr></table></figure>
<img src="https://s2.loli.net/2025/08/07/lvgEniWw74a8pP6.png" style="zoom:67%;" />
<h2 id="项目"><a class="markdownIt-Anchor" href="#项目"></a> 项目</h2>
<p><u>本科参与的一个项目，其实不难。</u></p>
<p>描述：给定一个<strong>绿色圆形标靶</strong>，测出其与相机的<strong>角度和距离</strong>；再给电机反馈这些参数。</p>
<p><strong>相机标定法</strong>，借助matlab以及相机对着棋盘进行标定，获得如下参数。</p>
<p>**相机内参：**焦距（fx，fy）；主点坐标（cx，cy）；畸变系数（径向畸变k1，k2，k3和切向畸变p1，p2）</p>
<p><strong>相机内参</strong>：旋转矩阵（3x3）；平移向量（3x1）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># -------------------- 1. 初始化相机和标定参数 --------------------</span></span><br><span class="line"><span class="comment"># 相机内参（假设已通过标定获得）</span></span><br><span class="line">camera_matrix = np.array([</span><br><span class="line">    [<span class="number">800</span>, <span class="number">0</span>, <span class="number">320</span>],    <span class="comment"># fx, fy为焦距（像素单位），cx, cy为主点坐标</span></span><br><span class="line">    [<span class="number">0</span>, <span class="number">800</span>, <span class="number">240</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">])</span><br><span class="line">dist_coeffs = np.array([<span class="number">0.12</span>, -<span class="number">0.05</span>, <span class="number">0.0005</span>, <span class="number">0.0005</span>, <span class="number">0.0</span>])  <span class="comment"># 畸变系数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 标靶实际半径（单位：米）</span></span><br><span class="line">TARGET_RADIUS = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化摄像头</span></span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)  <span class="comment"># 0为默认摄像头</span></span><br><span class="line">cap.<span class="built_in">set</span>(cv2.CAP_PROP_FRAME_WIDTH, <span class="number">640</span>)</span><br><span class="line">cap.<span class="built_in">set</span>(cv2.CAP_PROP_FRAME_HEIGHT, <span class="number">480</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># -------------------- 2. 初始化串口（USART） --------------------</span></span><br><span class="line"><span class="comment"># 根据实际串口修改</span></span><br><span class="line">ser = serial.Serial(<span class="string">&#x27;COM3&#x27;</span>, <span class="number">115200</span>, timeout=<span class="number">1</span>)  <span class="comment"># 波特率需与电机控制器匹配</span></span><br><span class="line">time.sleep(<span class="number">2</span>)  <span class="comment"># 等待串口初始化</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -------------------- 3. 主循环：检测标靶并计算参数 --------------------</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ret:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 畸变校正</span></span><br><span class="line">    undistorted_frame = cv2.undistort(frame, camera_matrix, dist_coeffs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># --- 检测绿色圆形标靶（最大圆）---</span></span><br><span class="line">    <span class="comment"># 转换为HSV颜色空间提取绿色区域</span></span><br><span class="line">    hsv = cv2.cvtColor(undistorted_frame, cv2.COLOR_BGR2HSV)</span><br><span class="line">    lower_green = np.array([<span class="number">35</span>, <span class="number">50</span>, <span class="number">50</span>])    <span class="comment"># HSV绿色范围下限</span></span><br><span class="line">    upper_green = np.array([<span class="number">85</span>, <span class="number">255</span>, <span class="number">255</span>])  <span class="comment"># HSV绿色范围上限</span></span><br><span class="line">    <span class="comment"># 颜色或亮度阈值分割，取绿色,过滤</span></span><br><span class="line">    mask = cv2.inRange(hsv, lower_green, upper_green)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 形态学处理（去噪）</span></span><br><span class="line">    <span class="comment"># 闭运算，先膨胀，再腐蚀 --- &gt;  填充目标内部的小孔或空洞、平滑目标边界、连接断裂的物体边缘</span></span><br><span class="line">    kernel = np.ones((<span class="number">5</span>, <span class="number">5</span>), np.uint8)</span><br><span class="line">    mask = cv2.morphologyEx(mask, cv2.MORPH_CLOSE, kernel)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 霍夫圆变换检测所有圆形</span></span><br><span class="line">    circles = cv2.HoughCircles(mask, cv2.HOUGH_GRADIENT, dp=<span class="number">1</span>, minDist=<span class="number">50</span>,</span><br><span class="line">                              param1=<span class="number">50</span>, param2=<span class="number">30</span>, minRadius=<span class="number">10</span>, maxRadius=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> circles <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># 筛选最大圆（假设标靶是最大的绿色圆形）</span></span><br><span class="line">        circles = np.uint16(np.around(circles))</span><br><span class="line">        largest_circle = <span class="built_in">max</span>(circles[<span class="number">0</span>, :], key=<span class="keyword">lambda</span> x: x[<span class="number">2</span>])  <span class="comment"># 按半径排序</span></span><br><span class="line">        x, y, r = largest_circle</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 绘制检测结果</span></span><br><span class="line">        cv2.circle(undistorted_frame, (x, y), r, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">        cv2.circle(undistorted_frame, (x, y), <span class="number">2</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 计算距离 ---</span></span><br><span class="line">        <span class="comment"># 相似三角形原理：distance = (fx * 实际半径) / 检测到的像素半径</span></span><br><span class="line">        distance = (camera_matrix[<span class="number">0</span>, <span class="number">0</span>] * TARGET_RADIUS) / r</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 计算角度（偏航角和俯仰角）---</span></span><br><span class="line">        <span class="comment"># 像素坐标转换为以光心为原点的坐标</span></span><br><span class="line">        u = x - camera_matrix[<span class="number">0</span>, <span class="number">2</span>]  <span class="comment"># 水平偏移（x方向）</span></span><br><span class="line">        v = camera_matrix[<span class="number">1</span>, <span class="number">2</span>] - y   <span class="comment"># 垂直偏移（y轴向下，取反）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 计算角度（弧度）</span></span><br><span class="line">        theta_x = math.atan2(u, camera_matrix[<span class="number">0</span>, <span class="number">0</span>])  <span class="comment"># 偏航角（水平）</span></span><br><span class="line">        theta_y = math.atan2(v, camera_matrix[<span class="number">1</span>, <span class="number">1</span>])  <span class="comment"># 俯仰角（垂直）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 转换为角度制</span></span><br><span class="line">        angle_x_deg = math.degrees(theta_x)</span><br><span class="line">        angle_y_deg = math.degrees(theta_y)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 显示结果 ---</span></span><br><span class="line">        cv2.putText(undistorted_frame, <span class="string">f&quot;Distance: <span class="subst">&#123;distance:<span class="number">.2</span>f&#125;</span>m&quot;</span>, (<span class="number">10</span>, <span class="number">30</span>),</span><br><span class="line">                    cv2.FONT_HERSHEY_SIMPLEX, <span class="number">0.7</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">        cv2.putText(undistorted_frame, <span class="string">f&quot;Angle X: <span class="subst">&#123;angle_x_deg:<span class="number">.2</span>f&#125;</span>deg&quot;</span>, (<span class="number">10</span>, <span class="number">60</span>),</span><br><span class="line">                    cv2.FONT_HERSHEY_SIMPLEX, <span class="number">0.7</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># --- 通过USART发送数据 ---</span></span><br><span class="line">        <span class="comment"># 格式：角度(deg),距离(m)\n（如&quot;15.30,2.45\n&quot;）</span></span><br><span class="line">        command = <span class="string">f&quot;<span class="subst">&#123;angle_x_deg:<span class="number">.2</span>f&#125;</span>,<span class="subst">&#123;distance:<span class="number">.2</span>f&#125;</span>\n&quot;</span>.encode()</span><br><span class="line">        ser.write(command)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Sent to motor: <span class="subst">&#123;command.decode().strip()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 显示实时画面</span></span><br><span class="line">    cv2.imshow(<span class="string">&quot;Target Detection&quot;</span>, undistorted_frame)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == <span class="number">27</span>:  <span class="comment"># ESC键退出</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -------------------- 4. 释放资源 --------------------</span></span><br><span class="line">cap.release()</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line">ser.close()</span><br></pre></td></tr></table></figure>

      </div>
    </div>
</div>

<div class="post-category">

    <div id="p-meta-i">
        
              
                <a class="hover-with-bg" href="/categories/Opencv/">Opencv</a>
              
          
          
              
                <a class="hover-with-bg" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"># 学习笔记</a>
              
                <a class="hover-with-bg" href="/tags/Opencv/"># Opencv</a>
              
                <a class="hover-with-bg" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/"># 计算机视觉</a>
              
          
    </div>
</div>


<div class="post-footer">
  

</div>

</article>


        </div>
        
<footer class="text-center">
    
    
    
    
    
    <p>&copy;  2022 - 2025&nbsp;&nbsp;本书</p>
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme by <a href="https://github.com/oCoke/hexo-theme-miracle" target="_blank">Miracle</a></p>
    
    
</footer>

<div class="p-btn">
    
        <a class="toc-btn" id="toc-btn"><i id="i-menu"></i></a>
    
    
      <a class="toc-btn" id="share-btn"><i>
        <svg t="1670124379155" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2683" width="25" height="25"><path d="M395.946667 234.666667v64H256v469.333333h512V522.666667h64V768a64 64 0 0 1-64 64H256a64 64 0 0 1-64-64V298.666667a64 64 0 0 1 64-64h139.946667z m335.850666-87.914667l150.848 150.826667-158.378666 158.4-45.269334-45.248L748.394667 341.333333H672c-121.685333 0-220.714667 97.024-223.914667 217.941334L448 565.333333v85.333334h-64v-85.333334C384 406.272 512.938667 277.333333 672 277.333333h99.861333l-85.312-85.333333 45.248-45.248z" p-id="2684" fill="var(--first-text-color)"></path></svg>
      </i></a>
    
    <a href="javascript:window.scrollTo({top:0,behavior:'smooth'});" class="click-btn">
      <i id="i-up"></i>
    </a>
</div>

<!-- SCRIPTS -->






<script>
    document.getElementById("btn-dropdown").addEventListener('click', () => {
      toggleClass("#dropdown-menus","display-inline");
    });
    console.log('\n' + ' %c Powered by Hexo Theme Miracle ' + ' %c https://github.com/oCoke/hexo-theme-miracle ' + '\n' + '\n', 'color: #fff; background: #4F9BFA; padding:5px 0;', 'background: #FFF; padding:5px 0;');

    

    
  /* 小彩蛋: 饮茶先啦 */
  setTimeout(() => {
    var time = new Date();
    if (time.getHours() == 15) {
      let comment = document.createComment(' 三点几嚟！饮茶先啦！ ');
      document.body.insertBefore(comment, document.getElementsByTagName('header')[0]);
    }
  },1);
    
</script>


<script>
    var postImg = document.querySelectorAll("article[class=page] img");
    for (let imgi = 0; imgi < postImg.length; imgi++) {
        postImg[imgi].onclick = () => {
            let zoomImg = document.createElement("div");
            zoomImg.id = "zoomImg";
            zoomImg.innerHTML = `<div id="zoom-picture"></div>
    <div class="poptrox-overlay"
        style="position: fixed; left: 0px; top: 0px; z-index: 20000; width: 100%; height: 100%; text-align: center; cursor: zoom-out; opacity: 1;">
        <div style="display:inline-block;height:100%;vertical-align:middle;"></div>
        <div
            style="position:absolute;left:0;top:0;width:100%;height:100%;background:#000000;opacity:0;filter:alpha(opacity=0);">
        </div>
        <div class="poptrox-popup"
            style="display: inline-block; vertical-align: middle; position: relative; z-index: 1; cursor: zoom-out; min-width: 10px; min-height: 10px; width: auto; height: auto;">
            <div class="loader" style="display: none;"></div>
            <div class="pic" style="text-indent: 0px;"><img
                    src="${ postImg[imgi].srcset || postImg[imgi].src }" alt="Loading..."
                    style="vertical-align: bottom; max-width: 85vw; max-height: 85vh;"></div>
        </div>
    </div>`;
            document.body.appendChild(zoomImg);
                document.querySelector("#zoomImg").onclick = () => {
                    document.querySelector("#zoomImg").remove();
                }
        }
    }
    
</script>




    <script>
        query("#toc-btn")[0].onclick = () => {
            if (query(".post-toc")[0].innerHTML) {
                toggleClass(".post-toc", "display-inline");
            }
        }

        if (!query(".post-toc")[0].innerHTML) {
            addClass("#toc-btn","display-none");
        }
    </script>



    <script>
        query("#share-btn")[0].onclick = async () => {
            let url = `${location.protocol}//${location.hostname}${location.port ? ":"+location.port:location.port}${location.pathname}#read=${sessionStorage.getItem(location.pathname+"_read_y") || ""}`;
            try {
                await navigator.clipboard.writeText(url);
                prompt_core("分享链接已经复制至剪贴板", 4800, true);
            } catch(e) {
                prompt_core("分享链接复制失败，请手动复制<br/>"+url, 4800, false);
            }
        }
    </script>







    <script>
        const getScrollPosition = (el = window) => ({
            x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
            y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
        });
        // 此处的 750 是「页面元素的最大宽度」
        var wx = document.getElementsByClassName("article-m")[0].clientWidth;
        var wy = document.getElementsByClassName("article-m")[0].clientHeight;
        function windowScroll() {
            // 反复修改 确保页面尺寸不改变
            wx = document.getElementsByClassName("article-m")[0].clientWidth;
            wy = document.getElementsByClassName("article-m")[0].clientHeight;
            let y = Math.round(getScrollPosition().y);
            // console.log(y);
            // 组合字符串，同时记录页面坐标，页面宽度和高度
            let p = `${y}:${wx}:${wy}`;
            // 写入到 sessionStorage 中
            sessionStorage.setItem(location.pathname + "_read_y", p);
        }
        // URL 中是否包含传递的坐标信息
        setTimeout(() => {
            if (location.hash.split("#read=").length > 1) {
                prompt_core("已有阅读进度，正在跳转", 4800, true);
                // 分离字符串
                let read_y = location.hash.split("#read=")[1];
                read_y = read_y.split(":");
                // 组合乘积，顺滑移动至坐标
                window.scrollTo({top: Math.round(Number(read_y[0]) * Number(read_y[1] * Number(read_y[2] / wx / wy))), behavior: "smooth"});
            } else {
                // 从 sessionStorage 中获取
                let read_y = sessionStorage.getItem(location.pathname + "_read_y") || "0:0:0";
                read_y = read_y.split(":");
                if (read_y[0] != "0") prompt_core("已有阅读进度，正在跳转", 4800, true);
                window.scrollTo({top: Math.round(Number(read_y[0]) * Number(read_y[1] * Number(read_y[2] / wx / wy))), behavior: "smooth"});
            }
        }, 500);
        window.onscroll = windowScroll;
    </script>





        </div>
        <div id="css-loading">
            <h3 class="text-center">加载中...</h3>
        </div>
        
    </body>
</html>
